# 187、SQL优化和索引优化、表结构优化？

SQL优化、索引优化和表结构优化是提高数据库性能的重要手段，它们可以减少数据库的开销和提高查询效率。下面分别介绍它们的优化方法：

1. SQL优化：

- 避免使用SELECT *，只查询需要的列；
- 避免使用子查询，可以使用JOIN语句代替；
- 避免使用OR，可以使用IN和UNION代替；
- 避免使用LIKE '%!v(MISSING)alue%!'(MISSING)，可以使用LIKE 'value%!'(MISSING)或全文索引代替；
- 避免使用ORDER BY RAND()，可以使用ORDER BY id DESC + LIMIT代替；
- 避免使用大量的UNION，可以使用UNION ALL代替；
- 避免使用GROUP BY，可以使用DISTINCT代替；
- 避免使用HAVING，可以使用WHERE代替。

2.索引优化：

- 选择合适的索引类型，如B树索引、哈希索引、全文索引等；
- 选择合适的索引列，如经常查询的列、联合查询的列、分组和排序的列等；
- 避免使用过多的索引，会增加写入数据的开销；
- 避免使用过长的索引，会增加磁盘I/O的次数；
- 避免使用NULL值，会降低索引的效率；
- 避免使用函数和表达式，会降低索引的效率。

3.表结构优化：

- 采用合适的数据类型，如INT、VARCHAR、DATETIME等；
- 避免使用大量的TEXT和BLOB类型，会增加磁盘I/O的次数；
- 避免使用NULL值，会增加存储空间和查询开销；
- 采用合适的表结构，如垂直拆分、水平拆分等；
- 避免使用过多的表关联，会增加查询开销；
- 避免使用过多的触发器和存储过程，会增加写入数据的开销。 总之，SQL优化、索引优化和表结构优化是提高数据库性能的重要手段，需要根据具体的情况进行优化，以达到最佳的查询效率和性能。 
